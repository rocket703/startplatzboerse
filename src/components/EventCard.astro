---
// src/components/EventCard.astro
const { category, title, date, location, distance, price, oldPrice } = Astro.props;

const currentPrice = Number(price);
const previousPrice = oldPrice ? Number(oldPrice) : null;
const showSale = previousPrice !== null && previousPrice > currentPrice;
---

<div class="card-anchor">
    <div class="event-card">
        <div class="card-header">
            <span class="category">{category}</span>
            <span class="date">{date}</span>
        </div>
        
        <h3>{title}</h3>
        
        <div class="info">
            <span>{location}</span> • <span>{distance || 'Startplatz'}</span>
        </div>
        
        <div class="price-box">
            <div class="price-wrapper">
                {showSale && (
                    <span class="old">{previousPrice}€</span>
                )}
                <span class="price">{currentPrice}€</span>
            </div>
            
            {showSale && (
                <span class="sale-badge">Deal</span>
            )}
        </div>
    </div>
</div>

<style>
    /* Der Wrapper stellt sicher, dass die Zentrierung ÜBERALL greift */
    .card-anchor {
        width: 100%;
        display: flex;
        justify-content: center;
        padding: 0;
        margin: 0;
    }

    .event-card {
        background: #111;
        min-width: 300px;
        padding: 25px;
        border-radius: 20px;
        border: 5px solid rgba(255,255,255,0.08);
        color: white;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        
        display: flex;
        flex-direction: column;
        justify-content: space-between;

        /* --- DER FIX FÜR GLEICHE BREITE & MITTE --- */
        width: 100%;
        max-width: 400px; /* Hier die gewünschte Breite festlegen */
        box-sizing: border-box;
    }

    .event-card:hover {
        transform: translateY(-5px);
        border-color: #00bcd4;
        box-shadow: 0 10px 30px rgba(0, 188, 212, 0.1);
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
    }

    .category { 
        color: #00bcd4; 
        font-weight: 800; 
        font-size: 0.7rem; 
        text-transform: uppercase; 
        letter-spacing: 1.5px;
    }

    .date { 
        color: #555; 
        font-size: 0.75rem; 
        font-weight: 600;
    }

    h3 { 
        margin: 0 0 10px; 
        font-size: clamp(1.2rem, 4vw, 1.4rem); 
        font-weight: 900; 
        letter-spacing: -0.5px;
        line-height: 1.1;
        min-height: 2.2em; /* Sorgt dafür, dass Karten bei einzeiligen Titeln nicht schrumpfen */
    }

    .info { 
        color: #888; 
        font-size: 0.9rem; 
        margin-bottom: 20px; 
        line-height: 1.4;
    }

    .price-box { 
        border-top: 1px solid rgba(255,255,255,0.08); 
        padding-top: 15px; 
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .price-wrapper {
        display: flex;
        align-items: baseline;
        gap: 8px;
    }

    .price { 
        font-size: 1.8rem; 
        font-weight: 900; 
        color: #00bcd4; 
        filter: drop-shadow(0 0 10px rgba(0, 188, 212, 0.3));
    }

    .old { 
        text-decoration: line-through; 
        color: #444; 
        font-weight: 600;
        font-size: 1rem; 
    }

    .sale-badge {
        background: #00bcd4;
        color: #000;
        padding: 4px 10px;
        border-radius: 6px;
        font-size: 0.7rem;
        font-weight: 900;
        text-transform: uppercase;
    }
</style>